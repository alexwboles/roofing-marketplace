<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Roof Health Score – Roofing Marketplace</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>

<body>

  <!-- UNIVERSAL NAVIGATION -->
  <nav class="topbar">
    <a href="/" class="logo">Roofing Marketplace</a>
    <div class="nav-links">
      <a href="/">Overview</a>
      <a href="/features">Features</a>
      <a href="/roof-health" class="active">Roof Health</a>
      <a href="/dashboard">My Dashboard</a>
      <a href="/contractor-login">Contractors</a>
      <a href="/admin-dashboard">Admin</a>
    </div>
  </nav>

  <!-- HERO -->
  <header class="dashboard-hero-illustrated">
    <div class="hero-text">
      <h1>Your Roof Health Report</h1>
      <p>A complete AI‑powered analysis of your roof’s condition.</p>
    </div>

    <div class="hero-illustration">
      <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c" alt="Roof illustration">
    </div>
  </header>

  <!-- ROOF HEALTH SCORE -->
  <section class="roof-health-widget">
    <h2>Roof Health Score</h2>

    <div class="health-score-container">
      <div class="health-score-circle">
        <span class="score-number">--</span>
      </div>

      <div class="health-score-details">
        <p class="score-label">Overall Condition: <strong>--</strong></p>
        <p class="score-desc">
          Upload roof photos to generate your AI‑powered roof health score.
        </p>
      </div>
    </div>
  </section>

  <!-- METRICS -->
  <section class="metric-breakdown">
    <h2>Roof Metrics Breakdown</h2>

    <div class="metric-grid">
      <div class="metric-card"><h4>Age</h4><p>--</p></div>
      <div class="metric-card"><h4>Material</h4><p>--</p></div>
      <div class="metric-card"><h4>Pitch</h4><p>--</p></div>
      <div class="metric-card"><h4>Damage Level</h4><p>--</p></div>
      <div class="metric-card"><h4>Complexity</h4><p>--</p></div>
      <div class="metric-card"><h4>Square Footage</h4><p>--</p></div>
      <div class="metric-card"><h4>Valleys</h4><p>--</p></div>
      <div class="metric-card"><h4>Stacks</h4><p>--</p></div>
    </div>
  </section>

  <!-- RECOMMENDED ACTIONS -->
  <section class="recommended-actions">
    <h2>Recommended Actions</h2>
    <ul id="actions-list">
      <li>Upload photos to generate recommendations.</li>
    </ul>
  </section>

  <!-- LIFESPAN -->
  <section class="lifespan-widget">
    <h2>Estimated Remaining Lifespan</h2>
    <div class="lifespan-bar">
      <div class="lifespan-fill" id="lifespan-fill" style="width: 0%"></div>
    </div>
    <p class="lifespan-label" id="lifespan-label">--</p>
  </section>

  <!-- TIMELINE -->
  <section class="maintenance-timeline">
    <h2>Maintenance Timeline</h2>
    <div class="timeline" id="timeline"></div>
  </section>

  <script>
    (function () {
      const raw = localStorage.getItem('roofAnalysis');
      if (!raw) return;

      const data = JSON.parse(raw);

      // Score
      document.querySelector('.score-number').textContent = data.roofHealthScore;
      document.querySelector('.score-label strong').textContent = data.condition;
      document.querySelector('.score-desc').textContent =
        `Based on your recent photo uploads and AI analysis, your roof is in ${data.condition.toLowerCase()} condition.`;

      // Metrics
      const metrics = {
        'Age': `${data.ageEstimateYears} years`,
        'Material': data.materialType,
        'Pitch': data.pitch,
        'Damage Level': data.damageLevel,
        'Complexity': data.complexity,
        'Square Footage': `${data.estimatedSquareFootage} sq ft`,
        'Valleys': data.valleyCount,
        'Stacks': data.stackCount
      };

      document.querySelectorAll('.metric-card').forEach(card => {
        const title = card.querySelector('h4').textContent;
        card.querySelector('p').textContent = metrics[title];
      });

      // Recommended Actions
      const actionsList = document.getElementById('actions-list');
      actionsList.innerHTML = '';
      data.recommendedActions.forEach(action => {
        const li = document.createElement('li');
        li.textContent = `✔ ${action}`;
        actionsList.appendChild(li);
      });

      // Lifespan
      const lifespanPercent = Math.min(100, Math.max(0, (data.lifespanYearsRemaining / 30) * 100));
      document.getElementById('lifespan-fill').style.width = lifespanPercent + '%';
      document.getElementById('lifespan-label').textContent =
        `Approximately ${data.lifespanYearsRemaining} years remaining`;

      // Timeline
      const timelineEl = document.getElementById('timeline');
      timelineEl.innerHTML = '';
      data.maintenanceTimeline.forEach(item => {
        const div = document.createElement('div');
        div.className = 'timeline-item';

        const dot = document.createElement('span');
        dot.className = 'timeline-dot';

        const p = document.createElement('p');
        p.innerHTML = `<strong>${item.year}:</strong> ${item.action}`;

        div.appendChild(dot);
        div.appendChild(p);
        timelineEl.appendChild(div);
      });
    })();
  </script>

</body>
</html>
