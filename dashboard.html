<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Dashboard â€“ Roofing Marketplace</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>

<body class="dashboard-body">

  <nav class="topbar">
    <a href="/" class="logo">Roofing Marketplace</a>
    <div class="nav-links">
      <a href="/">Overview</a>
      <a href="/dashboard" class="active">My Dashboard</a>
    </div>
  </nav>

  <!-- HERO -->
  <section class="dashboard-hero-illustrated">
    <div class="hero-text">
      <h1>Your Roofing Hub</h1>
      <p>Manage assessments, estimates, projects, and billing â€” all in one place.</p>
    </div>

    <div class="hero-illustration">
      <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c" alt="Roof illustration">
    </div>
  </section>

  <!-- QUICK ACTIONS -->
  <section class="quick-actions">
    <button onclick="location.href='/upload'">ğŸ“¸ Upload Photos</button>
    <button onclick="location.href='/quotes'">ğŸ“Š View Estimates</button>
    <button onclick="location.href='/projects'">ğŸ› ï¸ Manage Projects</button>
    <button onclick="location.href='/payments'">ğŸ’³ Billing</button>
  </section>

  <!-- ROOF HEALTH SCORE -->
  <section class="roof-health-widget">
    <h2>Roof Health Score</h2>

    <div class="health-score-container">
      <div class="health-score-circle">
        <span class="score-number">82</span>
      </div>

      <div class="health-score-details">
        <p class="score-label">Overall Condition: <strong>Good</strong></p>
        <p class="score-desc">
          Based on your recent photo uploads and AI analysis, your roof is in good condition.
          Minor wear detected on shingles. No urgent repairs recommended.
        </p>
      </div>
    </div>
  </section>

  <!-- METRIC BREAKDOWN -->
  <section class="metric-breakdown">
    <h2>Roof Metrics Breakdown</h2>

    <div class="metric-grid">
      <div class="metric-card">
        <h4>Age</h4>
        <p>12 years</p>
      </div>

      <div class="metric-card">
        <h4>Material</h4>
        <p>Architectural Shingle</p>
      </div>

      <div class="metric-card">
        <h4>Pitch</h4>
        <p>6/12</p>
      </div>

      <div class="metric-card">
        <h4>Damage Level</h4>
        <p>Low</p>
      </div>

      <div class="metric-card">
        <h4>Complexity</h4>
        <p>Moderate</p>
      </div>
    </div>
  </section>

  <!-- RECOMMENDED ACTIONS -->
  <section class="recommended-actions">
    <h2>Recommended Actions</h2>

    <ul>
      <li>âœ” Clean gutters to improve water flow</li>
      <li>âœ” Replace 2â€“3 worn shingles</li>
      <li>âœ” Schedule a full inspection within 12 months</li>
      <li>âœ” Monitor minor granule loss in highâ€‘sun areas</li>
    </ul>
  </section>

  <!-- LIFESPAN WIDGET -->
  <section class="lifespan-widget">
    <h2>Estimated Remaining Lifespan</h2>

    <div class="lifespan-bar">
      <div class="lifespan-fill" style="width: 68%"></div>
    </div>

    <p class="lifespan-label">Approximately 12â€“15 years remaining</p>
  </section>

  <!-- MAINTENANCE TIMELINE -->
  <section class="maintenance-timeline">
    <h2>Maintenance Timeline</h2>

    <div class="timeline">
      <div class="timeline-item">
        <span class="timeline-dot"></span>
        <p><strong>2024:</strong> Clean gutters & inspect flashing</p>
      </div>

      <div class="timeline-item">
        <span class="timeline-dot"></span>
        <p><strong>2026:</strong> Replace worn shingles</p>
      </div>

      <div class="timeline-item">
        <span class="timeline-dot"></span>
        <p><strong>2029:</strong> Full roof inspection recommended</p>
      </div>

      <div class="timeline-item">
        <span class="timeline-dot"></span>
        <p><strong>2034:</strong> Begin planning for replacement</p>
      </div>
    </div>
  </section>

  <!-- DASHBOARD GRID -->
  <section class="dashboard-container">
    <div class="dashboard-grid">

      <a href="/upload" class="card card-upload">
        <div class="card-icon">ğŸ“¸</div>
        <h3>Photo Uploads</h3>
        <p>Add photos to generate a detailed AI roof report.</p>
      </a>

      <a href="/quotes" class="card card-quotes">
        <div class="card-icon">ğŸ“Š</div>
        <h3>AI Estimates</h3>
        <p>View your AIâ€‘generated roof estimates and cost breakdowns.</p>
      </a>

      <a href="/projects" class="card card-projects">
        <div class="card-icon">ğŸ› ï¸</div>
        <h3>My Projects</h3>
        <p>Monitor active jobs and review completed work.</p>
      </a>

      <a href="/payments" class="card card-payments">
        <div class="card-icon">ğŸ’³</div>
        <h3>Billing & Payments</h3>
        <p>View invoices, track payments, and manage billing.</p>
      </a>

    </div>
  </section>

  <!-- RECENT ACTIVITY -->
  <section class="recent-activity">
    <h2>Recent Activity</h2>

    <ul>
      <li><span>ğŸ“¸</span> You uploaded 3 new roof photos</li>
      <li><span>ğŸ“Š</span> AI generated a new estimate</li>
      <li><span>ğŸ› ï¸</span> Project â€œOak Street Roofâ€ was updated</li>
      <li><span>ğŸ’³</span> Payment received for Invoice #1042</li>
    </ul>
  </section>

  <script>
    (function () {
      const raw = localStorage.getItem('roofAnalysis');
      if (!raw) return;

      const data = JSON.parse(raw);

      // Roof Health Score
      const scoreEl = document.querySelector('.score-number');
      const conditionEl = document.querySelector('.score-label strong');
      const descEl = document.querySelector('.score-desc');

      if (scoreEl) scoreEl.textContent = data.roofHealthScore;
      if (conditionEl) conditionEl.textContent = data.condition;

      if (descEl) {
        descEl.textContent =
          `Based on your recent photo uploads and AI analysis, your roof is in ${data.condition.toLowerCase()} condition.`;
      }

      // Metrics
      const metricCards = document.querySelectorAll('.metric-card');
      metricCards.forEach((card) => {
        const title = card.querySelector('h4')?.textContent;
        const p = card.querySelector('p');
        if (!title || !p) return;

        if (title === 'Age') p.textContent = `${data.ageEstimateYears} years`;
        if (title === 'Material') p.textContent = data.materialType;
        if (title === 'Pitch') p.textContent = data.pitch;
        if (title === 'Damage Level') p.textContent = data.damageLevel;
        if (title === 'Complexity') p.textContent = data.complexity;
      });

      // Recommended Actions
      const actionsList = document.querySelector('.recommended-actions ul');
      if (actionsList && Array.isArray(data.recommendedActions)) {
        actionsList.innerHTML = '';
        data.recommendedActions.forEach((action) => {
          const li = document.createElement('li');
          li.textContent = `âœ” ${action}`;
          actionsList.appendChild(li);
        });
      }

      // Lifespan
      const lifespanLabel = document.querySelector('.lifespan-label');
      if (lifespanLabel) {
        lifespanLabel.textContent =
          `Approximately ${data.lifespanYearsRemaining} years remaining`;
      }

      // Maintenance Timeline
      const timelineEl = document.querySelector('.maintenance-timeline .timeline');
      if (timelineEl && Array.isArray(data.maintenanceTimeline)) {
        timelineEl.innerHTML = '';
        data.maintenanceTimeline.forEach((item) => {
          const div = document.createElement('div');
          div.className = 'timeline-item';

          const dot = document.createElement('span');
          dot.className = 'timeline-dot';

          const p = document.createElement('p');
          p.innerHTML = `<strong>${item.year}:</strong> ${item.action}`;

          div.appendChild(dot);
          div.appendChild(p);
          timelineEl.appendChild(div);
        });
      }
    })();
  </script>

</body>
</html>
